spring.application.name=backend
# For previews without MongoDB, run with: SPRING_PROFILES_ACTIVE=no-mongo
# This uses application-no-mongo.properties to disable Mongo auto-configuration so the app can start.

# MongoDB Configuration (env-driven)
spring.data.mongodb.uri=${MONGODB_URL:mongodb://localhost:27017}
spring.data.mongodb.database=${MONGODB_DB:resumematch_pro}

# Security / JWT
# NOTE: JWT_SECRET has no default for security; application will fail to start if missing.
app.security.jwt.secret=${JWT_SECRET}
app.security.jwt.expiration-minutes=${JWT_EXP_MINUTES:120}

# File storage
app.storage.dir=${FILE_STORAGE_DIR:./storage}

# Multipart file upload
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=25MB
spring.servlet.multipart.max-request-size=30MB

# CORS - use a fixed allowed origin for local dev
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000}
app.cors.allowed-methods=GET,POST,PATCH,DELETE,OPTIONS
app.cors.allowed-headers=Content-Type,Authorization
app.cors.allow-credentials=false

# Actuator
management.endpoints.web.exposure.include=health,info

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# Respect X-Forwarded-* / Forwarded headers so redirects preserve external scheme/host/port
server.forward-headers-strategy=framework
